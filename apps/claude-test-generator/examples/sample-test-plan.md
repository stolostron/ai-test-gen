# Sample Test Plan - Custom Labels Feature

> Generated using Claude Test Generator

## Test Case: Implement Custom Labels for ClusterCurator Job Pods

**Description**: 
- Verify that custom labels can be added to ClusterCurator Job pods through annotations
- Ensure label propagation works correctly across job lifecycle

**Setup**: 
- ACM hub cluster with ClusterCurator operator installed
- Managed cluster available for curator operations
- Test user requires cluster-admin permissions

| Test Steps | Expected Results |
|------------|------------------|
| 1. Create ClusterCurator with custom labels:<br/>```yaml<br/>apiVersion: cluster.open-cluster-management.io/v1beta1<br/>kind: ClusterCurator<br/>metadata:<br/>  name: test-custom-labels<br/>  annotations:<br/>    curator.open-cluster-management.io/job-labels: "team=qe,environment=test"<br/>spec:<br/>  desiredCuration: upgrade<br/>```<br/>Apply: `oc apply -f clustercurator.yaml` | ClusterCurator created successfully:<br/>`clustercurator.cluster.open-cluster-management.io/test-custom-labels created` |
| 2. Verify Job creation and label inheritance:<br/>`oc get jobs -l cluster.open-cluster-management.io/clustercurator=test-custom-labels` | Job created with custom labels visible |
| 3. Check specific pod labels:<br/>`oc get pods -l job-name=test-custom-labels-job -o jsonpath='{.items[0].metadata.labels}'` | Pod metadata shows:<br/>- `team: qe`<br/>- `environment: test`<br/>- Standard ClusterCurator labels |
| 4. Validate label persistence across job restarts:<br/>- Delete existing job pod<br/>- Wait for job controller to recreate pod<br/>- Check labels again | New pod maintains the same custom labels |
| 5. Test invalid label format:<br/>```yaml<br/>curator.open-cluster-management.io/job-labels: "invalid/label/format"<br/>```<br/>Apply and observe | ClusterCurator validation rejects invalid label format with clear error message |
| 6. Cleanup:<br/>`oc delete clustercurator test-custom-labels` | Resource deleted successfully, all associated jobs and pods cleaned up |

---

**Generated by**: Claude Test Generator  
**Format**: Standard table format for Polarion import  
**Time to generate**: ~3 minutes  
**Manual equivalent**: ~30 minutes
