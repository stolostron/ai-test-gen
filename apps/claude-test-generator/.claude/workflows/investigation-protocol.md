# Deep Reasoning Investigation Protocol

## üß† Comprehensive AI-Powered Analysis with Cognitive Processing

The framework performs **thorough investigation** with **advanced deep reasoning analysis** of all related tickets and code changes:

### Framework 3-Stage Intelligence Process Investigation Protocol

#### **Stage 1: Data Collection (Phases 0-2.5)**
**"Collect all relevant, useful data from every possible source"**

##### **Phase 0: Version Context Foundation**
**JIRA FixVersion Intelligence Service:**
- Universal version compatibility analysis for any JIRA ticket
- Feature availability determination across any technology stack
- Version gap analysis and deployment readiness assessment

##### **Phase 1: Enhanced Parallel Execution with Context Sharing**
**Agent A (JIRA Intelligence) - Requirements Extraction:**
1. **3-Level Deep Analysis**: Main ticket ‚Üí Subtasks ‚Üí Dependencies for complete understanding
2. **Component Identification**: Extract affected software components for any technology stack
3. **Business Context**: Customer impact, strategic value, compliance requirements
4. **PR Reference Discovery**: GitHub PR links and implementation changes
5. **Real-time Context Sharing**: Share discoveries with Agent D via Context Sharing Service

**Agent D (Environment Intelligence) - Infrastructure Assessment:**
- **Environment Health Scoring**: Multi-dimensional cluster readiness assessment
- **Real Data Collection**: Actual command outputs and infrastructure samples
- **Context Reception**: Receive Agent A discoveries for targeted data collection
- **Deployment Assessment**: Feature availability and deployment status validation
- **Progressive Enhancement**: 75% confidence (no context) ‚Üí 95% (full context)

##### **Phase 2: Parallel Deep Investigation**
**Agent B (Documentation Intelligence) - Feature Understanding:**
- **Universal Documentation Analysis**: Works with any technology documentation
- **Feature Functionality Extraction**: How features work conceptually across any software type
- **User Workflow Analysis**: Available interaction methods (UI, CLI, API) for any feature
- **AI Documentation Intelligence**: Smart branch selection and content analysis

**Agent C (GitHub Investigation) - Code Analysis:**
- **AI-Prioritized Investigation**: Deep analysis of high-impact PRs, lighter coverage of supporting changes
- **Universal Repository Support**: Works with any programming language and repository structure
- **Implementation to Testing Mapping**: Code changes analyzed for testing implications
- **Integration Point Identification**: Cross-component analysis for any architecture

##### **Phase 2.5: QE Intelligence Analysis with Ultrathink**
**Enhanced QE Intelligence Service:**
- **Ultrathink Reasoning**: Sophisticated pattern analysis across existing test implementations
- **Strategic Pattern Intelligence**: Extract proven testing approaches from successful QE automation
- **Coverage Gap Analysis**: Evidence-based identification of testing opportunities
- **Team Repository Focus**: Analysis limited to team-managed repositories with proper exclusions

#### **Stage 2: AI Analysis (Phase 3)**
**\"Make sense of ALL collected data and create strategic intelligence\"**

##### **AI Strategic Services Sequential Analysis**
**Complexity Detection AI:**
- **Universal Complexity Assessment**: Analyzes any feature type for optimal test structure
- **Test Sizing Optimization**: Determines 4-10 step optimal range based on feature scope
- **Multi-table Strategy**: Complex features broken into focused test scenarios

**Ultrathink Analysis AI:**
- **Strategic Business Reasoning**: Deep analysis of customer value and technical risk
- **Priority Identification**: Critical validation points for any software feature
- **Cross-impact Assessment**: Business continuity and user experience implications

**Smart Scoping AI:**
- **Comprehensive-but-Targeted**: Maximum coverage within focused boundaries
- **QE Intelligence Integration**: Informed by testing pattern analysis from Phase 2.5
- **Resource Optimization**: Efficient testing strategy for any feature complexity

**Title Generation AI:**
- **Professional Standards**: Industry-quality naming conventions for any feature type
- **Action-Oriented Focus**: Clear test purpose communication
- **Technology Adaptation**: Appropriate technical detail for any software stack

#### **Stage 3: Report Construction (Phase 4)**
**\"Build professional test plan using strategic intelligence\"**

##### **Pattern Extension Service Test Generation**
**Evidence-Based Construction:**
- **100% Pattern Traceability**: All test elements traceable to proven successful patterns
- **Implementation Reality Alignment**: Perfect alignment with actual code capabilities
- **Universal Data Integration**: Real environment data for realistic Expected Results
- **Dual UI+CLI Excellence**: Complete workflows with comprehensive alternatives

**Quality Assurance Integration:**
- **Cross-Agent Validation**: Continuous consistency monitoring across all 4 agents
- **Evidence Validation Engine**: Real-time fictional content prevention throughout
- **Professional Output**: Enterprise-ready test plans with realistic examples
- **Dual Report Architecture**: Environment-agnostic test cases + complete analysis

#### **Phase 2: Context-Aware Parallel Execution**
**Agent B (Documentation Intelligence) - Multi-Method Approach:**
- **GitHub CLI Priority**: Primary method for enhanced documentation analysis with correct branch structure
- **Correct Branch Detection**: Use actual repository structure ({version}_stage, {version}_prod)  
- **WebFetch Fallback**: Reliable fallback when GitHub CLI unavailable
- **Intelligent Internet Search**: Automatic internet search when documentation insufficient
- **Comprehensive Synthesis**: Combine git documentation with internet research for complete understanding

**Agent C (GitHub Investigation) - AI-Powered Parallel Investigation:**
- **Input Context**: Complete JIRA context with ALL PRs and repositories from Phase 1a
- **AI Strategic Analysis**: AI service analyzes ALL PRs and determines investigation depth per PR based on impact
- **AI Investigation Planning**: AI determines focus areas, code analysis scope, and related work priority for each PR
- **Script Execution Control**: Reliable execution of AI-determined investigation plan with gh CLI priority + WebFetch fallback
- **AI Result Synthesis**: AI processes ALL investigation data to identify E2E testing implications and implementation patterns

### üìö AI Documentation Intelligence Service (CORRECTED)
**Primary Source**: Red Hat ACM Official Documentation Repository
- **Repository**: https://github.com/stolostron/rhacm-docs with correct branch structure
- **Branch Pattern**: {version}_stage (development), {version}_prod (production), main (fallback)
- **GitHub CLI Integration**: analysis with gh api and gh search capabilities
- **WebFetch Fallback**: Universal compatibility when CLI unavailable
- **Intelligence Assessment**: Automatic evaluation of documentation completeness
- **Internet Research Enhancement**: Smart internet search when git documentation insufficient
- **Comprehensive Synthesis**: Combined analysis of official docs + community knowledge

### PR and Implementation Deep Dive ‚ö†Ô∏è MANDATORY ENHANCED INVESTIGATION
- **‚ö†Ô∏è CRITICAL: PR Status Investigation**: MANDATORY detailed analysis including:
  - **PR Found**: Status (open/closed/merged), creation and merge dates, author information, repository location
  - **PR Not Found**: Explicitly document "No related PRs found" with comprehensive search criteria used
  - **Search Methodology**: Document all repositories searched, search terms used, and why PRs might not exist
- **Code Change Analysis**: When PRs found, provide actual implementation details:
  - **Specific Code Changes**: New functions, modified classes, configuration updates
  - **Implementation Details**: How the feature is technically implemented
  - **Integration Logic**: How new code integrates with existing systems
- **Implementation Timeline Analysis**: 
  - **Development Phases**: PR creation, review, merge dates
  - **Release Mapping**: Target ACM/MCE version, release cycle information
  - **Team Information**: Developer names, reviewer approvals, project ownership
- **Implementation Reality Validation**: ‚ö†Ô∏è MANDATORY verification of actual feature deployment status
- **Environment Feature Detection**: Active validation that implementation is live in test environment
- **Deployment Status Assessment**: Evidence-based determination of what's available for testing
- **Feature Availability Determination**: Clear distinction between implemented vs. deployed features
- **Integration Point Identification**: How components connect and interact

### ‚ö†Ô∏è CRITICAL: Implementation Reality Validation Protocol

**MANDATORY STEPS - NO EXCEPTIONS:**

1. **Container Image Analysis**: 
   - Extract running controller/operator image digests from test environment
   - Cross-reference image build dates with PR merge dates
   - Validate image contains the specific feature implementation

2. **Feature Behavior Verification**:
   - Test actual feature behavior in environment (not just CRD schema)
   - Verify new code paths are accessible and functional
   - Confirm implementation matches PR specifications

3. **Version Correlation Analysis**:
   - Map PR merge dates to release cycles
   - Identify minimum product version containing feature
   - Compare against test environment version

4. **Evidence-Based Status Reporting**:
   - Provide concrete evidence supporting deployment status claims
   - Document specific validation steps performed
   - Clear separation of "implemented in codebase" vs. "deployed in test env"

**FAILURE TO VALIDATE = INVALID DEPLOYMENT ASSESSMENT**

### üß† Deep Reasoning Analysis Integration ‚ö†Ô∏è NEW MANDATORY STAGE

**COMPREHENSIVE COGNITIVE ANALYSIS** - This stage applies advanced AI reasoning to all gathered investigation data:

**Analysis Requirements**:

1. **Deep Code Impact Reasoning**:
   - AI comprehends what code modifications accomplish in business and technical terms
   - analysis of how changes affect system architecture and user experience
   - Prediction of behavioral changes and integration implications
   - Identification of potential edge cases and failure modes

2. **Architectural Implication Assessment**:
   - AI evaluates how changes affect overall system design and component relationships
   - Analysis of API contract changes and compatibility implications
   - Assessment of performance and scalability impacts
   - Security implication evaluation and risk assessment

3. **Strategic Test Optimization Intelligence**:
   - AI determines optimal testing approach balancing coverage with efficiency
   - Risk-weighted prioritization focusing on highest-impact areas
   - Cross-repository correlation analysis for automation gaps
   - Smart test scoping to minimize effort while maximizing defect detection

4. **Cross-Repository Intelligence Integration**:
   - Analysis of development-automation alignment and coverage gaps
   - Identification of automation patterns applicable to new functionality
   - Documentation synchronization assessment and recommendations
   - Strategic guidance for improving repository ecosystem health

**Analysis Outputs**:
- **Comprehensive Impact Report**: Natural language summary of all change implications
- **Risk-Prioritized Test Recommendations**: Optimized testing strategy focusing on critical areas
- **Scope Optimization Guidance**: Minimal viable test sets for maximum effectiveness
- **Cross-Repository Intelligence**: Automation gaps and alignment opportunities
- **Strategic Implementation Advice**: Clear, actionable recommendations for optimal outcomes

**MANDATORY ENFORCEMENT**: All investigations MUST include advanced deep reasoning analysis stage before proceeding to test generation - NO EXCEPTIONS.

### Missing Data Detection & Response
When critical data is missing, the framework:
- **üö® Identifies Gaps**: Missing PRs, inaccessible designs, undefined architectures
- **üìä Quantifies Impact**: What specific testing cannot be performed
- **‚úÖ Scopes Available Work**: Focus on testable components
- **üìã Provides Future Roadmap**: Test cases ready for when missing data becomes available

## üéØ Investigation Quality Standards

- **100% Ticket Coverage**: Every linked ticket analyzed regardless of nesting level with advanced reasoning
- **PR Verification**: All attached PRs examined for implementation details with deep code impact analysis
- **Cross-Reference Validation**: Ensuring consistency across related tickets enhanced by AI correlation analysis
- **Context Preservation**: Understanding full feature history and evolution with strategic intelligence integration
- **üß† Analysis Completion**: ALL investigations must include comprehensive deep reasoning analysis
- **üéØ Strategic Test Optimization**: AI-powered test scoping and prioritization based on cognitive insights
- **üîÑ Cross-Repository Intelligence**: Comprehensive analysis of development-automation alignment and gaps
- **üìä Evidence-Based Recommendations**: All strategic guidance supported by concrete analysis and reasoning

### üö® Mandatory Analysis Requirements

- ‚ùå **BLOCKED**: Investigation completion without advanced deep reasoning analysis stage
- ‚ùå **BLOCKED**: Test strategy generation without cognitive-informed optimization and prioritization
- ‚ùå **BLOCKED**: Strategic recommendations without comprehensive cognitive analysis and evidence
- ‚úÖ **REQUIRED**: reasoning analysis for all complex changes and architectural modifications
- ‚úÖ **REQUIRED**: Cross-repository correlation analysis for all feature implementations
- ‚úÖ **MANDATORY**: Strategic test optimization based on cognitive insights and recommendations

This enhanced investigation protocol ensures that all analysis benefits from advanced AI reasoning capabilities, resulting in significantly more accurate, focused, and effective test strategies that maximize quality outcomes while optimizing resource utilization.